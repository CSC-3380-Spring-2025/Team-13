{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bryce\\\\OneDrive\\\\Documents\\\\GitHub\\\\Team-13\\\\my-app\\\\src\\\\pages\\\\LoginPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { getAuth, GoogleAuthProvider, signInWithEmailAndPassword, signInWithPopup } from 'firebase/auth';\nimport { getFirestore, doc, getDoc, setDoc } from 'firebase/firestore';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/LoginPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = ({\n  setUser\n}) => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const [authing, setAuthing] = useState(false);\n  const auth = getAuth();\n  const db = getFirestore();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n      const userDoc = await getDoc(doc(db, \"users\", user.uid));\n      if (userDoc.exists()) {\n        const data = userDoc.data();\n        setUser(data.username);\n        localStorage.setItem('currentUsername', data.username);\n      } else {\n        console.error('User document does not exist');\n      }\n      setMessage('Login Successful!');\n      navigate('/ProfilePage');\n    } catch (err) {\n      console.error('Login error:', err.message);\n      if (err.code === 'auth/user-not-found') {\n        setError('User not found');\n      } else if (err.code === 'auth/wrong-password') {\n        setError('Incorrect password');\n      } else {\n        setError('Login failed');\n      }\n    }\n  };\n  const signInWithGoogle = async () => {\n    setAuthing(true);\n    try {\n      const response = await signInWithPopup(auth, new GoogleAuthProvider());\n      const user = response.user;\n      const userRef = doc(db, \"users\", user.uid);\n      const userDoc = await getDoc(userRef);\n      if (!userDoc.exists()) {\n        var _user$email;\n        const username = user.displayName || ((_user$email = user.email) === null || _user$email === void 0 ? void 0 : _user$email.split('@')[0]) || 'Anonymous';\n        await setDoc(userRef, {\n          username: username,\n          email: user.email\n        });\n      }\n      const updatedDoc = await getDoc(userRef);\n      if (updatedDoc.exists()) {\n        const data = updatedDoc.data();\n        setUser(data.username);\n        localStorage.setItem('currentUsername', data.username);\n      }\n      navigate('/ProfilePage');\n    } catch (error) {\n      console.error(error);\n      setAuthing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"signup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Login to your IA account!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"email@gmail.com\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"password1234\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"success-message\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"google-button\",\n      onClick: signInWithGoogle,\n      disabled: authing,\n      style: {\n        marginTop: '10px'\n      },\n      children: \"Sign In with Google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"RX89UtmPIWu+Lc1NF1JoG1ARuWY=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","getAuth","GoogleAuthProvider","signInWithEmailAndPassword","signInWithPopup","getFirestore","doc","getDoc","setDoc","useNavigate","jsxDEV","_jsxDEV","LoginPage","setUser","_s","email","setEmail","password","setPassword","error","setError","message","setMessage","authing","setAuthing","auth","db","navigate","handleSubmit","e","preventDefault","userCredential","user","userDoc","uid","exists","data","username","localStorage","setItem","console","err","code","signInWithGoogle","response","userRef","_user$email","displayName","split","updatedDoc","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","target","required","onClick","disabled","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/bryce/OneDrive/Documents/GitHub/Team-13/my-app/src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { getAuth, GoogleAuthProvider, signInWithEmailAndPassword, signInWithPopup } from 'firebase/auth';\r\nimport { getFirestore, doc, getDoc, setDoc } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/LoginPage.css';\r\n\r\ninterface LoginPageProps {\r\n  setUser: (name: string) => void;\r\n}\r\n\r\nconst LoginPage: React.FC<LoginPageProps> = ({ setUser }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [authing, setAuthing] = useState(false);\r\n\r\n  const auth = getAuth();\r\n  const db = getFirestore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setMessage('');\r\n\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n\r\n      const userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n      if (userDoc.exists()) {\r\n        const data = userDoc.data();\r\n        setUser(data.username);\r\n        localStorage.setItem('currentUsername', data.username);\r\n      } else {\r\n        console.error('User document does not exist');\r\n      }\r\n\r\n      setMessage('Login Successful!');\r\n      navigate('/ProfilePage');\r\n    } catch (err: any) {\r\n      console.error('Login error:', err.message);\r\n      if (err.code === 'auth/user-not-found') {\r\n        setError('User not found');\r\n      } else if (err.code === 'auth/wrong-password') {\r\n        setError('Incorrect password');\r\n      } else {\r\n        setError('Login failed');\r\n      }\r\n    }\r\n  };\r\n\r\n  const signInWithGoogle = async () => {\r\n    setAuthing(true);\r\n\r\n    try {\r\n      const response = await signInWithPopup(auth, new GoogleAuthProvider());\r\n      const user = response.user;\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      const userDoc = await getDoc(userRef);\r\n\r\n      if (!userDoc.exists()) {\r\n        const username = user.displayName || user.email?.split('@')[0] || 'Anonymous';\r\n        await setDoc(userRef, {\r\n          username: username,\r\n          email: user.email,\r\n        });\r\n      }\r\n\r\n      const updatedDoc = await getDoc(userRef);\r\n      if (updatedDoc.exists()) {\r\n        const data = updatedDoc.data();\r\n        setUser(data.username);\r\n        localStorage.setItem('currentUsername', data.username);\r\n      }\r\n\r\n      navigate('/ProfilePage');\r\n    } catch (error) {\r\n      console.error(error);\r\n      setAuthing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"signup-container\">\r\n      <form onSubmit={handleSubmit}>\r\n        <h5>Login to your IA account!</h5>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"email@gmail.com\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          required\r\n        /><br />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"password1234\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n        /><br />\r\n        <button type=\"submit\">Login</button>\r\n\r\n        {error && <p className=\"error-message\">{error}</p>}\r\n        {message && <p className=\"success-message\">{message}</p>}\r\n      </form>        \r\n      <button\r\n        className=\"google-button\"\r\n        onClick={signInWithGoogle}\r\n        disabled={authing}\r\n        style={{ marginTop: '10px' }}\r\n      >\r\n        Sign In with Google\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}